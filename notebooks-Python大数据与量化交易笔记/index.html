<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="量化交易的笔记，半弃坑状态随缘更新">
<meta property="og:type" content="article">
<meta property="og:title" content="Python大数据与量化交易笔记">
<meta property="og:url" content="http://blog.gddfeng.com/notebooks-Python%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="孤独的風">
<meta property="og:description" content="量化交易的笔记，半弃坑状态随缘更新">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-09-26T08:40:16.000Z">
<meta property="article:modified_time" content="2021-12-11T08:40:20.000Z">
<meta property="article:author" content="gddFeng">
<meta property="article:tag" content="课堂笔记">
<meta property="article:tag" content="量化交易">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary"><title>Python大数据与量化交易笔记 | 孤独的風</title><link ref="canonical" href="http://blog.gddfeng.com/notebooks-Python%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AC%94%E8%AE%B0/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":false,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner header-inner--height header-inner--bgcolor"><nav class="header-nav header-nav--sticky"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/课堂笔记/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">课堂笔记</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">编程语言</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/编程语言/c/"><span class="header-nav-submenu-item__text">C++</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/编程语言/蓝桥/"><span class="header-nav-submenu-item__text">蓝桥</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">考研学习</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/考研学习/计算机网络/"><span class="header-nav-submenu-item__text">计算机网络</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/考研学习/计算机操作系统/"><span class="header-nav-submenu-item__text">计算机操作系统</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">渗透测试</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/渗透测试/SQL注入/"><span class="header-nav-submenu-item__text">SQL注入</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">Python大数据与量化交易笔记</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-09-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-12-11</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">7.9k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">41分</span></span></div></header><div class="post-body">
        <h1 id="第一课"   >
          <a href="#第一课" class="heading-link"><i class="fas fa-link"></i></a><a href="#第一课" class="headerlink" title="第一课"></a>第一课</h1>
      
        <h2 id="金融基础知识培训"   >
          <a href="#金融基础知识培训" class="heading-link"><i class="fas fa-link"></i></a><a href="#金融基础知识培训" class="headerlink" title="金融基础知识培训"></a>金融基础知识培训</h2>
      <p>金融，是指货币资金的融通</p>
<p>金融机构：</p>
<ul>
<li>中央银行</li>
<li>银行</li>
<li>非营利机构</li>
<li>在境外开办的外资、侨资、中外合资的金融机构</li>
</ul>
<p>金融市场：</p>
<ul>
<li><p>货币市场 </p>
<ul>
<li>国债</li>
</ul>
</li>
<li><p>资本市场</p>
<ul>
<li>期限在一年以上的金融资产交易的市场<ul>
<li>银行中长期存贷款市场</li>
</ul>
</li>
</ul>
</li>
<li><p>外汇市场</p>
<ul>
<li>经营外币和以外币计价的票据等有价证券买卖的市场</li>
</ul>
</li>
<li><p>黄金市场</p>
<ul>
<li>黄金买卖的交易中心或场所</li>
</ul>
</li>
<li><p>金融衍生工具市场</p>
<ul>
<li>远期市场</li>
<li>期货市场</li>
<li>期权市场</li>
<li>互换市场</li>
</ul>
</li>
</ul>

        <h3 id="货币基础知识"   >
          <a href="#货币基础知识" class="heading-link"><i class="fas fa-link"></i></a><a href="#货币基础知识" class="headerlink" title="货币基础知识"></a>货币基础知识</h3>
      <ul>
<li><p>货币的功能</p>
<ol>
<li>流通手段</li>
<li>价值尺度</li>
<li>贮藏手段</li>
<li>延期支付的标准</li>
</ol>
</li>
<li><p>货币的层次</p>
<ul>
<li>M0 = 流通中的现金</li>
<li>M1 = M0 + 活期存款</li>
<li>M2 = M1 + 定期存款</li>
<li>M3 = M2 + 其他 </li>
</ul>
</li>
</ul>

        <h3 id="信用"   >
          <a href="#信用" class="heading-link"><i class="fas fa-link"></i></a><a href="#信用" class="headerlink" title="信用"></a>信用</h3>
      <p>经济活动中的债权债务关系。</p>
<ul>
<li>信用分为五种形式：<ul>
<li>商业信用</li>
<li>银行信用</li>
<li>国家信用</li>
<li>消费信用</li>
<li>国际信用</li>
</ul>
</li>
</ul>

        <h3 id="金融市场"   >
          <a href="#金融市场" class="heading-link"><i class="fas fa-link"></i></a><a href="#金融市场" class="headerlink" title="金融市场"></a>金融市场</h3>
      <ul>
<li>金融市场的功能<ul>
<li>便利筹资和投资</li>
<li>方便资金灵活转换</li>
<li>引导资金流动和集中</li>
<li>有利于中央银行进行调控</li>
</ul>
</li>
</ul>

        <h1 id="第二课-量化投资的发展和理工生跨界做量化的开启姿势"   >
          <a href="#第二课-量化投资的发展和理工生跨界做量化的开启姿势" class="heading-link"><i class="fas fa-link"></i></a><a href="#第二课-量化投资的发展和理工生跨界做量化的开启姿势" class="headerlink" title="第二课 量化投资的发展和理工生跨界做量化的开启姿势"></a>第二课 量化投资的发展和理工生跨界做量化的开启姿势</h1>
      
        <h2 id="课程介绍"   >
          <a href="#课程介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#课程介绍" class="headerlink" title="课程介绍"></a>课程介绍</h2>
      
        <h3 id="系统地做量化从系统地学习开始"   >
          <a href="#系统地做量化从系统地学习开始" class="heading-link"><i class="fas fa-link"></i></a><a href="#系统地做量化从系统地学习开始" class="headerlink" title="系统地做量化从系统地学习开始"></a>系统地做量化从系统地学习开始</h3>
      <ul>
<li>标准程序员<ul>
<li>去金融机构写代码<ul>
<li>重点学习量化系统架构和模块的搭建方法</li>
<li>理解业务本质</li>
</ul>
</li>
<li>自己做宽客<ul>
<li>恶补实战课</li>
<li>认真学逻辑</li>
<li>忘掉代码</li>
</ul>
</li>
</ul>
</li>
<li>有实盘经验<ul>
<li>策略逻辑<ul>
<li>用量化的手段检验逻辑靠不靠谱</li>
</ul>
</li>
<li>策略实现<ul>
<li>Coding只是为了一个趁手的工具</li>
</ul>
</li>
<li>策略实战<ul>
<li>不停诊断、优化测试</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h3 id="学什么？学会什么？"   >
          <a href="#学什么？学会什么？" class="heading-link"><i class="fas fa-link"></i></a><a href="#学什么？学会什么？" class="headerlink" title="学什么？学会什么？"></a>学什么？学会什么？</h3>
      <ul>
<li>量化投资的发展和理工生跨界做量化的开启姿势</li>
<li>上手搭建最简单的交易系统</li>
<li>丰富你的信号系统</li>
<li>仓位管理和风控管理功能实现</li>
<li>怎么评价和诊断交易策略</li>
<li>进入专业量化赛道的必修课</li>
</ul>

        <h2 id="量化投资的发展"   >
          <a href="#量化投资的发展" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化投资的发展" class="headerlink" title="量化投资的发展"></a>量化投资的发展</h2>
      
        <h3 id="代表人物"   >
          <a href="#代表人物" class="heading-link"><i class="fas fa-link"></i></a><a href="#代表人物" class="headerlink" title="代表人物"></a>代表人物</h3>
      <ul>
<li>起源：Jules Regnault</li>
<li>基石：Edward O.Thorp</li>
<li>优势：James Simons</li>
</ul>

        <h3 id="量化交易在中国的发展"   >
          <a href="#量化交易在中国的发展" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化交易在中国的发展" class="headerlink" title="量化交易在中国的发展"></a>量化交易在中国的发展</h3>
      <p>算法交易：如何进行购买，一次买多少，买多少次？</p>

        <h3 id="金融工程模型分类"   >
          <a href="#金融工程模型分类" class="heading-link"><i class="fas fa-link"></i></a><a href="#金融工程模型分类" class="headerlink" title="金融工程模型分类"></a>金融工程模型分类</h3>
      <ol>
<li>期货、债券<ol>
<li>CTA趋势</li>
<li>Mean Reversion</li>
<li>统计套利</li>
<li>事件驱动</li>
<li>日内波动</li>
</ol>
</li>
<li>股票、ETF<ol>
<li>Alpha</li>
<li>股票对冲</li>
<li>期现套利</li>
</ol>
</li>
<li>期权策略<ol>
<li>市场中性 Delta neutral</li>
<li>I.V. strategy</li>
<li>3V maxtrix</li>
<li>+Gramma +Theta</li>
</ol>
</li>
</ol>

        <h3 id="K线"   >
          <a href="#K线" class="heading-link"><i class="fas fa-link"></i></a><a href="#K线" class="headerlink" title="K线"></a>K线</h3>
      <p>高开低收</p>

        <h2 id="量化投资与主观投资的关系"   >
          <a href="#量化投资与主观投资的关系" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化投资与主观投资的关系" class="headerlink" title="量化投资与主观投资的关系"></a>量化投资与主观投资的关系</h2>
      
        <h3 id="交易观点"   >
          <a href="#交易观点" class="heading-link"><i class="fas fa-link"></i></a><a href="#交易观点" class="headerlink" title="交易观点"></a>交易观点</h3>
      <ul>
<li>理论驱动：通过分析经验、理论进行指定交易策略</li>
<li>数据驱动：大数据统计得出算法结论</li>
</ul>

        <h3 id="五大门派"   >
          <a href="#五大门派" class="heading-link"><i class="fas fa-link"></i></a><a href="#五大门派" class="headerlink" title="五大门派"></a>五大门派</h3>
      <ul>
<li>价值型：评估价值</li>
<li>成长型：评估前景</li>
<li>技术型：技术走向</li>
<li>组合型：收益与风向评估</li>
<li>指数型：买指数</li>
</ul>

        <h3 id="EMH的三种形式"   >
          <a href="#EMH的三种形式" class="heading-link"><i class="fas fa-link"></i></a><a href="#EMH的三种形式" class="headerlink" title="EMH的三种形式"></a>EMH的三种形式</h3>
      <ol>
<li>弱式有效市场假说<ul>
<li>市场价格已充分反应出所有历史的证券价格信息，这时的技术分析失去作用，基本分析还可以。</li>
</ul>
</li>
<li>半强式有效市场假说<ul>
<li>价格已充分反映出所有已公开的有关公司运营前景的信息。</li>
<li>基本分析失去作用，只有内部消息才起作用</li>
</ul>
</li>
<li>强式有效市场假说<ul>
<li>价格已经反映了公司运营的所有情况</li>
<li>大白于天下了，没办法获利了。</li>
</ul>
</li>
</ol>

        <h3 id="理查德·塞勒的理论"   >
          <a href="#理查德·塞勒的理论" class="heading-link"><i class="fas fa-link"></i></a><a href="#理查德·塞勒的理论" class="headerlink" title="理查德·塞勒的理论"></a>理查德·塞勒的理论</h3>
      <ul>
<li>禀赋效应：人们在决策过程中对利和害的权衡是不均衡的，对“避害”的考虑远大于对“趋利”的考虑</li>
<li>跨期选择：人类恰恰是不擅长做跨期决策的，大多数时候会做出短视冲动的选择。</li>
<li>心理账户&amp;储蓄理论：人们在思考问题时，会在心li构建出分门别类的心理账户，分别进行计算。</li>
</ul>

        <h3 id="赚谁的钱？赚什么钱？"   >
          <a href="#赚谁的钱？赚什么钱？" class="heading-link"><i class="fas fa-link"></i></a><a href="#赚谁的钱？赚什么钱？" class="headerlink" title="赚谁的钱？赚什么钱？"></a>赚谁的钱？赚什么钱？</h3>
      <ol>
<li>市场在某一特定时间内的无效性，或者说是别人犯的错误</li>
<li>主动承担某种特定风险，继而获得承担该风险的风险溢价</li>
</ol>

        <h2 id="认识一个量化交易策略"   >
          <a href="#认识一个量化交易策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#认识一个量化交易策略" class="headerlink" title="认识一个量化交易策略"></a>认识一个量化交易策略</h2>
      
        <h3 id="双均线策略"   >
          <a href="#双均线策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#双均线策略" class="headerlink" title="双均线策略"></a>双均线策略</h3>
      <ul>
<li>代码至少有两个严重问题</li>
<li>策略逻辑上的漏洞更多</li>
<li>直接上实盘会死得很难看</li>
</ul>

        <h3 id="普量云上的模型"   >
          <a href="#普量云上的模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#普量云上的模型" class="headerlink" title="普量云上的模型"></a>普量云上的模型</h3>
      
        <h2 id="理工生做量化有什么优势"   >
          <a href="#理工生做量化有什么优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#理工生做量化有什么优势" class="headerlink" title="理工生做量化有什么优势"></a>理工生做量化有什么优势</h2>
      <p>对公式比较敏感吧</p>

        <h2 id="量化交易系统的基本架构"   >
          <a href="#量化交易系统的基本架构" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化交易系统的基本架构" class="headerlink" title="量化交易系统的基本架构"></a>量化交易系统的基本架构</h2>
      
        <h3 id="一个完整的交易系统"   >
          <a href="#一个完整的交易系统" class="heading-link"><i class="fas fa-link"></i></a><a href="#一个完整的交易系统" class="headerlink" title="一个完整的交易系统"></a>一个完整的交易系统</h3>
      <ul>
<li>市场——买卖什么</li>
<li>逻辑——买卖思路</li>
<li>头寸规模——买卖多少</li>
<li>入市——何时买进</li>
<li>止损——何时推出亏损的头寸</li>
<li>离市——何时退出盈利的头寸</li>
</ul>

        <h2 id="必要的基础知识"   >
          <a href="#必要的基础知识" class="heading-link"><i class="fas fa-link"></i></a><a href="#必要的基础知识" class="headerlink" title="必要的基础知识"></a>必要的基础知识</h2>
      
        <h1 id="第三课-上手搭建最简单的量化交易系统"   >
          <a href="#第三课-上手搭建最简单的量化交易系统" class="heading-link"><i class="fas fa-link"></i></a><a href="#第三课-上手搭建最简单的量化交易系统" class="headerlink" title="第三课 上手搭建最简单的量化交易系统"></a>第三课 上手搭建最简单的量化交易系统</h1>
      
        <h2 id="量化交易系统的处理流程"   >
          <a href="#量化交易系统的处理流程" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化交易系统的处理流程" class="headerlink" title="量化交易系统的处理流程"></a>量化交易系统的处理流程</h2>
      <ol>
<li>数据处理<ul>
<li>从TuShare获取行情数据</li>
<li>从东财网页获取财报数据</li>
<li>处理数据存在的问题</li>
</ul>
</li>
<li>策略开发<ul>
<li>计算PE</li>
<li>实现股票池选股逻辑</li>
<li>实现股票池的收益统计</li>
</ul>
</li>
<li>离线回测<ul>
<li>持仓的除权除股息处理</li>
<li>卖出和买入交易实现</li>
<li>收盘后交易信号判断</li>
<li>收益统计</li>
</ul>
</li>
<li>模拟跟踪</li>
<li>实盘交易</li>
<li>执行监控</li>
</ol>

        <h3 id="低估值的股票池择时策略"   >
          <a href="#低估值的股票池择时策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#低估值的股票池择时策略" class="headerlink" title="低估值的股票池择时策略"></a>低估值的股票池择时策略</h3>
      <ul>
<li>股票池<ul>
<li>0&lt; PE &lt; 30</li>
<li>PE从小到大排序，提出停牌，取前100只</li>
<li>调整周期：7个交易日</li>
</ul>
</li>
<li>择时<ul>
<li>买入：当日K线上穿10日均线</li>
<li>卖出：<ul>
<li>当天K线下穿10日均线</li>
<li>被调出股票池</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="开发环境准备"   >
          <a href="#开发环境准备" class="heading-link"><i class="fas fa-link"></i></a><a href="#开发环境准备" class="headerlink" title="开发环境准备"></a>开发环境准备</h2>
      <ul>
<li>MongoDB</li>
<li>Python3.7.0</li>
<li>PyCharm CE</li>
</ul>

        <h2 id="获取行情和财报数据：API和爬虫"   >
          <a href="#获取行情和财报数据：API和爬虫" class="heading-link"><i class="fas fa-link"></i></a><a href="#获取行情和财报数据：API和爬虫" class="headerlink" title="获取行情和财报数据：API和爬虫"></a>获取行情和财报数据：API和爬虫</h2>
      <p>用分时图做数据是有问题的</p>

        <h3 id="量化基本功"   >
          <a href="#量化基本功" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化基本功" class="headerlink" title="量化基本功"></a>量化基本功</h3>
      <ul>
<li>从数据源获取数据</li>
<li>发现并处理数据中存在的问题</li>
<li>通过基础数据计算出策略所需数据</li>
<li>了解数据不同数据源的差异</li>
</ul>
<p>不同的交易软件处理后的分钟数据不完全一致</p>
<p>明确一个行情数据接收和处理的概念，为今后搭建量化系统和进行策略开发打下基础。</p>

        <h3 id="任务"   >
          <a href="#任务" class="heading-link"><i class="fas fa-link"></i></a><a href="#任务" class="headerlink" title="任务"></a>任务</h3>
      <ul>
<li>从Tushare获取历史行情<ul>
<li>后复权(daily_hfq)</li>
<li>不复权(daily)</li>
</ul>
</li>
<li>从东方财富抓取财务报表数据</li>
</ul>
<ul>
<li>code：股票代码</li>
<li>date：日期</li>
<li>index：是否为指数</li>
<li>open：开盘价</li>
<li>close：收盘价</li>
<li>high：最高价</li>
<li>low：最低价</li>
<li>volume：成交量</li>
</ul>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># database.py</span></span><br><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定数据库的连接，quant_01是数据库名</span></span><br><span class="line">DB_CONN = MongoClient(<span class="string">&#x27;mongodb://127.0.0.1:27017&#x27;</span>)[<span class="string">&#x27;quant_01&#x27;</span>]</span><br></pre></td></tr></table></div></figure>


        <h3 id="补充停牌的日K数据"   >
          <a href="#补充停牌的日K数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#补充停牌的日K数据" class="headerlink" title="补充停牌的日K数据"></a>补充停牌的日K数据</h3>
      <ul>
<li>问题<ul>
<li>从Tushare获取的数据，停牌日没有数据</li>
</ul>
</li>
<li>影响<ul>
<li>回测时，不能直接参与账户的净值计算，导致账户的净值以及收益计算不准确</li>
</ul>
</li>
<li>解决方法<ul>
<li>增加<code>is_trading</code>字段，区分停牌日和交易日</li>
<li>补充停牌日的日K数据，根据当前数据现状，填充的数据位：open、close、high、low为停牌前最后一个交易日的close，volume为0，is_trading为false</li>
</ul>
</li>
</ul>

        <h2 id="数据定时增量入库"   >
          <a href="#数据定时增量入库" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据定时增量入库" class="headerlink" title="数据定时增量入库"></a>数据定时增量入库</h2>
      
        <h2 id="实现一个低PE的股票池"   >
          <a href="#实现一个低PE的股票池" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现一个低PE的股票池" class="headerlink" title="实现一个低PE的股票池"></a>实现一个低PE的股票池</h2>
      
        <h2 id="开发一组交易信号"   >
          <a href="#开发一组交易信号" class="heading-link"><i class="fas fa-link"></i></a><a href="#开发一组交易信号" class="headerlink" title="开发一组交易信号"></a>开发一组交易信号</h2>
      
        <h2 id="实现策略回测"   >
          <a href="#实现策略回测" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现策略回测" class="headerlink" title="实现策略回测"></a>实现策略回测</h2>
      
        <h1 id="第四课-丰富你的信号系统"   >
          <a href="#第四课-丰富你的信号系统" class="heading-link"><i class="fas fa-link"></i></a><a href="#第四课-丰富你的信号系统" class="headerlink" title="第四课 丰富你的信号系统"></a>第四课 丰富你的信号系统</h1>
      <p>实现MACD、Boll、RSI和分型等技术信号的计算，并能够在回测流程中使用这些信号完成择时。</p>
<ul>
<li><p>技术指标</p>
<ul>
<li>均线型</li>
<li>趋势型</li>
<li>摆动型</li>
<li>能量型</li>
</ul>
</li>
<li><p>趋势即牛熊</p>
</li>
<li><p>三个关系</p>
<ul>
<li>供需关系</li>
<li>因果关系</li>
<li>努力与结果</li>
</ul>
</li>
<li><p>趋势线</p>
</li>
<li><p>支撑</p>
<ul>
<li>在某个价位购买力超过了销售压力，需求吸收了全部供应</li>
<li>当价格再次回到支撑位，反弹力度表明需求质量</li>
</ul>
</li>
<li><p>压力</p>
<ul>
<li>某个价位销售力量超过了购买力，供应超过了需求</li>
<li>当价格再次回到压力值，价格回落力度表明供应是否扩大</li>
</ul>
</li>
<li><p>MACD</p>
<ul>
<li>金叉和死叉</li>
<li>价格变化的速度</li>
<li>(DIF-DEA)[可以X2增大程度以便观察]</li>
</ul>
</li>
<li><p>RSI</p>
<ul>
<li>超买和超卖</li>
</ul>
</li>
<li><p>Boll</p>
<ul>
<li>突破上轨和突破下轨</li>
</ul>
</li>
<li><p>分型</p>
<ul>
<li>顶分型和底分型</li>
</ul>
</li>
<li><p>功能实现</p>
<ul>
<li>信号计算<ul>
<li>实现信号算法</li>
<li>检测历史信号</li>
<li>保存到数据库</li>
</ul>
</li>
<li>信号使用<ul>
<li>提供查询接口</li>
</ul>
</li>
</ul>
</li>
<li><p>MACD算法</p>
</li>
<li><p>RSI-相对强弱指数</p>
<ul>
<li>一定时间窗口内，上涨幅度之和占整体涨跌幅度绝对值之和的比例</li>
<li>买入愿意相对总体成交的强弱</li>
<li>超卖区：RSI&lt;20</li>
<li>超买去：RSI&gt;80</li>
<li>强弱信号<ul>
<li>超买：RSI上穿80</li>
<li>超卖：RSI下穿20</li>
</ul>
</li>
<li>计算公式<ul>
<li><code>change = close - prev_close</code></li>
<li><code>up_change = max(change,0)</code></li>
<li><code>RSI = mean(up_change,N)*100 / mean(abs(change),N)</code></li>
</ul>
</li>
</ul>
</li>
<li><p>Boll</p>
<ul>
<li>基于统计学的标准差原理</li>
<li>三条轨道<ul>
<li>上轨：压力线</li>
<li>中轨：价格均线</li>
<li>下轨：支撑线</li>
</ul>
</li>
</ul>
</li>
<li><p>分型信号</p>
<ul>
<li>顶分型</li>
<li>底分型</li>
</ul>
</li>
</ul>

        <h1 id="第五课-仓位管理和风险控制功能实现"   >
          <a href="#第五课-仓位管理和风险控制功能实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#第五课-仓位管理和风险控制功能实现" class="headerlink" title="第五课 仓位管理和风险控制功能实现"></a>第五课 仓位管理和风险控制功能实现</h1>
      
        <h2 id="止盈和止损的功能实现"   >
          <a href="#止盈和止损的功能实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#止盈和止损的功能实现" class="headerlink" title="止盈和止损的功能实现"></a>止盈和止损的功能实现</h2>
      <ul>
<li><p>风险参考指标-波动率</p>
<ul>
<li>标准差</li>
<li>平均真实波幅ATR<ul>
<li>ATR:近N天真实波幅TR的算数平均值</li>
<li>TR:以下指标中的最大值<ul>
<li>今日最高价减去今日最低价</li>
<li>今日最高价减去昨日收盘价的绝对值</li>
<li>今日最低价减去昨日收盘价的绝对值</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>目标盈利法和最大亏损法</p>
</li>
<li><p>回撤止盈(浮动/跟踪止盈)</p>
</li>
<li><p>技术信号止盈/止损</p>
</li>
</ul>

        <h2 id="仓位管理工程实现"   >
          <a href="#仓位管理工程实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#仓位管理工程实现" class="headerlink" title="仓位管理工程实现"></a>仓位管理工程实现</h2>
      <ul>
<li><p>交易系统中与盈利相关的要素</p>
<ul>
<li>策略的胜率</li>
<li>每次交易的盈亏比</li>
<li>头寸规模的确定</li>
<li>资金量的大小</li>
<li>交易机会的多少</li>
<li>交易成本</li>
</ul>
</li>
<li><p>凯利公式</p>
</li>
<li><p>仓位管理</p>
<ul>
<li>投入资金/总资金</li>
<li>不同阶段：建仓、加仓/减仓、清仓</li>
<li>资金分配：头寸规模的确定和分配</li>
</ul>
</li>
<li><p>确定头寸规模的四种模式</p>
<ul>
<li>每一固定交易金额交易一个单位</li>
<li>等价值交易单位</li>
<li>百分比风险模型</li>
<li>百分比波动幅度模型</li>
</ul>
</li>
<li><p>常见的加仓方法</p>
<ul>
<li>均匀加仓</li>
<li>金字塔式</li>
<li>倒金字塔式</li>
</ul>
</li>
<li><p>仓位分配的其他考虑</p>
<ul>
<li>复利/不复利方式</li>
<li>资金占比上限</li>
<li>单日分配资金上限</li>
<li>同时持仓股(数量)上限</li>
<li>单只股票仓位上限</li>
<li>…..</li>
</ul>
</li>
<li><p>工程化实现的考虑</p>
<ul>
<li>可用资金不足时的处理<ul>
<li>限制新的购买，忽略该信号</li>
<li>在增加新股票之前，消除业绩最差的头寸</li>
<li>为继续购买新的，将头寸规模确定得小一些</li>
</ul>
</li>
<li>入选组合的优先级<ul>
<li>根据某种指标排序</li>
<li>根据历史表现筛选</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="编写一个完整的交易策略"   >
          <a href="#编写一个完整的交易策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#编写一个完整的交易策略" class="headerlink" title="编写一个完整的交易策略"></a>编写一个完整的交易策略</h2>
      <ol>
<li>基准策略和测试环境<ul>
<li>股票池候选：上证50成分股，不调仓</li>
<li>双均线策略<ul>
<li>日K级别，MA10 vs MA30</li>
<li>开盘前检测信号，金叉买、死叉卖</li>
</ul>
</li>
<li>头寸规模确定<ul>
<li>均仓方案(等额资金分配)</li>
</ul>
</li>
<li>测试环境<ul>
<li>回测区间</li>
<li>编程语言</li>
<li>平台 <span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://www.joinquant.com/" >www.joinquant.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ul>
</li>
</ul>
</li>
<li>按盈利比例均匀加仓<ul>
<li>记录每只持仓最后一次的买入价</li>
<li>如以当日开盘价相对于前一次买入价的盈利比例超过某个阈值，则等额加一次仓<ul>
<li>前提是当日没有任何止损或其它买入信号发生。</li>
</ul>
</li>
</ul>
</li>
<li>按波动率分配资金<ul>
<li>计算一段时间内的ATR作为波动率值</li>
<li>每只股票允许承担一定百分比的风险，折算到具体的风险金额</li>
<li>以该风险金额和波动率的值来确定建仓个股的资金头寸<ul>
<li>波动率越大，分配的头寸越小</li>
<li>波动率越小，分配的头寸越大</li>
</ul>
</li>
<li>基于基准策略进行改进实验</li>
</ul>
</li>
</ol>

        <h2 id="总结"   >
          <a href="#总结" class="heading-link"><i class="fas fa-link"></i></a><a href="#总结" class="headerlink" title="总结"></a>总结</h2>
      <ul>
<li>风险控制方法</li>
<li>仓位管理方法</li>
<li>编写一个完整的交易策略<ul>
<li>完整交易系统的要素</li>
<li>仓位管理和止盈/止损的编写示例</li>
<li>渐进式的改进过程</li>
</ul>
</li>
</ul>

        <h1 id="第六课-怎么评价和诊断交易策略"   >
          <a href="#第六课-怎么评价和诊断交易策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#第六课-怎么评价和诊断交易策略" class="headerlink" title="第六课 怎么评价和诊断交易策略"></a>第六课 怎么评价和诊断交易策略</h1>
      
        <h2 id="几种常用评价指标的工程实现"   >
          <a href="#几种常用评价指标的工程实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#几种常用评价指标的工程实现" class="headerlink" title="几种常用评价指标的工程实现"></a>几种常用评价指标的工程实现</h2>
      <ul>
<li><p>四个维度</p>
<ul>
<li>收益</li>
<li>风险</li>
<li>胜率</li>
<li>稳定性</li>
</ul>
</li>
<li><p>年化收益</p>
<ul>
<li>年化收益率是指把一段时间内的收益率换算成年收益率</li>
<li>单利/复利年化收益</li>
</ul>
</li>
<li><p>策略的评价指标-夏普比率</p>
</li>
<li><p>最大回撤</p>
<ul>
<li>在选定周期内任一历史时点往后推，策略的净值走到最低点时的收益率回撤幅度的最大值</li>
<li>用来描述策略可能出现的最糟糕情况，衡量了最极端可能的亏损。</li>
</ul>
</li>
<li><p>信息率</p>
<ul>
<li>信息率用来衡量承担主动风险所带来的超额收益，表示单位主动风险所带来的超额收益</li>
<li>在承担适度风险的情况下，尽量追求高信息率</li>
</ul>
</li>
</ul>

        <h2 id="什么样的策略是好策略"   >
          <a href="#什么样的策略是好策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么样的策略是好策略" class="headerlink" title="什么样的策略是好策略"></a>什么样的策略是好策略</h2>
      <p>不以目标需求为依据的策略性能评估都是耍流氓</p>
<ul>
<li><p>如何评价</p>
<ul>
<li>夏普比率<ul>
<li>风险与收益的权衡</li>
<li>索提诺比率</li>
</ul>
</li>
<li>最大回撤<ul>
<li>最坏的情况</li>
</ul>
</li>
<li>年化收益<ul>
<li>按复利计算</li>
</ul>
</li>
<li>心理因子<ul>
<li>舒适度</li>
</ul>
</li>
<li>信息率<ul>
<li>投资经理的能力</li>
</ul>
</li>
</ul>
</li>
<li><p>翻盘念书 = 最大回撤/年化收益</p>
</li>
<li><p>稳健型</p>
<ul>
<li>正收益</li>
<li>回撤小</li>
</ul>
</li>
<li><p>进取型</p>
<ul>
<li>收益风险平衡</li>
<li>风险至上</li>
</ul>
</li>
<li><p>激进型</p>
<ul>
<li>在可承受的风险范围内追求收益最大化</li>
<li>极端行情配套的风控和严格的压力测试</li>
</ul>
</li>
</ul>

        <h2 id="从哪些方面去改进策略"   >
          <a href="#从哪些方面去改进策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#从哪些方面去改进策略" class="headerlink" title="从哪些方面去改进策略"></a>从哪些方面去改进策略</h2>
      
        <h2 id="总结-1"   >
          <a href="#总结-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2>
      <ul>
<li>年化收益、夏普比率、最大回撤、信息率的实现</li>
<li>评价策略性能要从投资目标出发</li>
<li>策略的改进要从逻辑下手</li>
</ul>

        <h1 id="第七课-进入专业量化赛道的必修课"   >
          <a href="#第七课-进入专业量化赛道的必修课" class="heading-link"><i class="fas fa-link"></i></a><a href="#第七课-进入专业量化赛道的必修课" class="headerlink" title="第七课 进入专业量化赛道的必修课"></a>第七课 进入专业量化赛道的必修课</h1>
      
        <h2 id="最根本的数据处理：Level1-Ticks"   >
          <a href="#最根本的数据处理：Level1-Ticks" class="heading-link"><i class="fas fa-link"></i></a><a href="#最根本的数据处理：Level1-Ticks" class="headerlink" title="最根本的数据处理：Level1 Ticks"></a>最根本的数据处理：Level1 Ticks</h2>
      <ul>
<li>排查错误的需要<ul>
<li>在不同交易软件处理后的分钟数据不完全一致<ul>
<li>切分点不懂(OHLC值的差异)</li>
<li>左右边界(时间戳)靠拢方式不同</li>
</ul>
</li>
<li>附加信息的处理<ul>
<li>交易状态</li>
<li>涨跌停价的处理</li>
<li>资金流向(超大中小单)统计</li>
<li>换手率、量比、成交量/额等的积累</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th align="center">Tick级别</th>
<th align="center">Level 1</th>
<th align="center">Level 2</th>
</tr>
</thead>
<tbody><tr>
<td align="center">行情数据类别</td>
<td align="center">快照行情</td>
<td align="center">逐笔行情</td>
</tr>
<tr>
<td align="center">推送频度</td>
<td align="center">固定间隔(~3秒)</td>
<td align="center">委托队列和逐笔成交明细</td>
</tr>
<tr>
<td align="center">盘口报价显示</td>
<td align="center">五档行情</td>
<td align="center">十档行情(深交所千档)</td>
</tr>
<tr>
<td align="center">使用方式</td>
<td align="center">免费(客户端)</td>
<td align="center">付费使用</td>
</tr>
</tbody></table></div>
<ul>
<li>交易状态的处理<ul>
<li>记录交易状态(正常交易或停/复牌)的重要性<ul>
<li>回测错误和无效交易指令</li>
<li>技术指标计算误差</li>
</ul>
</li>
<li>交易状态的获取<ul>
<li>第三方的量化API(通常已有)</li>
<li>交易所行情接收</li>
<li>盘前/盘中信息库</li>
<li>Tick消息字段</li>
<li>紧急公告消息(临时停牌)</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="深入探讨两个实战量化策略"   >
          <a href="#深入探讨两个实战量化策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#深入探讨两个实战量化策略" class="headerlink" title="深入探讨两个实战量化策略"></a>深入探讨两个实战量化策略</h2>
      
        <h3 id="Hans123"   >
          <a href="#Hans123" class="heading-link"><i class="fas fa-link"></i></a><a href="#Hans123" class="headerlink" title="Hans123"></a>Hans123</h3>
      <ul>
<li><p>Hans123策略即增强</p>
<ul>
<li>日内交易策略，趋势突破系统</li>
<li>在开盘30(或N)分钟后准备入场</li>
<li>上轨 = 开盘后30分钟内的高点</li>
<li>下轨 = 开盘后30分钟内的低点</li>
<li>当价格突破上轨，买入开仓</li>
<li>当价格跌穿下轨，卖出开仓</li>
<li>突破时如已有持仓，则先止损再反手</li>
<li>如有持仓，在收盘前无条件平仓</li>
</ul>
</li>
<li><p>遇到极端情况</p>
<ul>
<li>Hans窗口内的振幅限制</li>
<li>日内止盈/止损(小周期K线)</li>
<li>大周期涨跌空间及后市判断</li>
<li>每交易日的开平仓次数限制</li>
</ul>
</li>
<li><p>如何适用于股票自动交易？</p>
<ul>
<li>T+1制度的限制</li>
<li>指数/板块到个股</li>
<li>从日内到日间</li>
<li>止盈/止损措施</li>
</ul>
</li>
</ul>

        <h2 id="量化策略的完整研发和系统搭建"   >
          <a href="#量化策略的完整研发和系统搭建" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化策略的完整研发和系统搭建" class="headerlink" title="量化策略的完整研发和系统搭建"></a>量化策略的完整研发和系统搭建</h2>
      
        <h2 id="如何优化你的量化策略：再谈人工智能"   >
          <a href="#如何优化你的量化策略：再谈人工智能" class="heading-link"><i class="fas fa-link"></i></a><a href="#如何优化你的量化策略：再谈人工智能" class="headerlink" title="如何优化你的量化策略：再谈人工智能"></a>如何优化你的量化策略：再谈人工智能</h2>
      
        <h2 id="预告：你未来必踩的坑-怎么上实盘？"   >
          <a href="#预告：你未来必踩的坑-怎么上实盘？" class="heading-link"><i class="fas fa-link"></i></a><a href="#预告：你未来必踩的坑-怎么上实盘？" class="headerlink" title="预告：你未来必踩的坑-怎么上实盘？"></a>预告：你未来必踩的坑-怎么上实盘？</h2>
      
        <h1 id="第八课-实战型量化投资必备知识"   >
          <a href="#第八课-实战型量化投资必备知识" class="heading-link"><i class="fas fa-link"></i></a><a href="#第八课-实战型量化投资必备知识" class="headerlink" title="第八课 实战型量化投资必备知识"></a>第八课 实战型量化投资必备知识</h1>
      
        <h2 id="量化投资策略类型及模型原理"   >
          <a href="#量化投资策略类型及模型原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化投资策略类型及模型原理" class="headerlink" title="量化投资策略类型及模型原理"></a>量化投资策略类型及模型原理</h2>
      <ul>
<li><p>常见品种</p>
<ul>
<li>股票</li>
<li>ETF</li>
<li>商品期货</li>
<li>股指期货</li>
<li>期权</li>
<li>债券</li>
<li>外汇</li>
</ul>
</li>
<li><p>股票</p>
<ul>
<li>公司基本资料</li>
<li>财务数据和分析</li>
<li>新闻公告及重大事项</li>
<li>行业分析</li>
<li>技术分析</li>
</ul>
</li>
<li><p>ETF</p>
<ul>
<li>交易型开放式指数基金</li>
</ul>
</li>
</ul>

        <h2 id="趋势型策略模型原理"   >
          <a href="#趋势型策略模型原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#趋势型策略模型原理" class="headerlink" title="趋势型策略模型原理"></a>趋势型策略模型原理</h2>
      <ul>
<li><p>供需关系</p>
<ul>
<li>趋势的动力来自于供需关系的不平衡</li>
</ul>
</li>
<li><p>因果关系</p>
<ul>
<li>趋势形成之前需要准备过程</li>
</ul>
</li>
<li><p>势力与结果</p>
<ul>
<li>成交量的增长没有使价格大幅增长，这是走势停止行为。</li>
</ul>
</li>
<li><p>要点总结</p>
<ul>
<li>头寸和退出<ul>
<li>可以小亏，必须大赚</li>
</ul>
</li>
<li>风险<ul>
<li>截断亏损，让利润奔跑</li>
</ul>
</li>
<li>分散化<ul>
<li>永远不要把鸡蛋放一个篮子</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="配对交易策略原理"   >
          <a href="#配对交易策略原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#配对交易策略原理" class="headerlink" title="配对交易策略原理"></a>配对交易策略原理</h2>
      <ul>
<li><p>套利交易-策略</p>
<ul>
<li>无风险套利</li>
<li>配对交易</li>
<li>统计套利</li>
</ul>
</li>
<li><p>对冲/套期保值-手段</p>
<ul>
<li>反向交易，规避单边持仓风险</li>
<li>期现、跨期、跨品种、跨市场</li>
</ul>
</li>
<li><p>市场中性(消除beta) vs Alpha(绝对收益)</p>
</li>
<li><p>波动率套利</p>
<ul>
<li>利用转债中的期权，对冲个股风险。当转债所包含的期权相对其标的股票低估时，通常其<strong>隐含波动率</strong>处于历史低位，此时买入转债同时做空一定数量的股票(根据模型计算获得)</li>
<li>在随后的交易日中，通过调整做空比例来达到市场中性，并赚取转债固定利息和期权固执上升所带来的低风险收益，其风险远小于单买股票或债券。</li>
</ul>
</li>
<li><p>期权套利</p>
<ul>
<li>期权套利是由期权合约或合约之间定价偏差所带来的套利机会。</li>
<li>期权套利策略灵活多样，包括买卖期权平价关系套利策略、价差期权组合套利策略、期权凸性套利策略、期权箱体套利策略等等。</li>
</ul>
</li>
<li><p>ETF套利</p>
<ul>
<li>ETF套利策略同样分为折价套利和溢价套利</li>
<li>折价套利是当ETF价值小于对应的一篮子股票市值，则买日ETF后，赎回一篮子股票，再在股票市场卖出进行套利。</li>
<li>溢价套利是当ETF价值大于对应的一篮子股票市值，则从股票市场购入一篮子股票，申购ETF份额，然后从二级市场卖出ETF份额进行套利。</li>
</ul>
</li>
<li><p>跨期套利</p>
</li>
</ul>

        <h2 id="量化策略研发流程与基本技能"   >
          <a href="#量化策略研发流程与基本技能" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化策略研发流程与基本技能" class="headerlink" title="量化策略研发流程与基本技能"></a>量化策略研发流程与基本技能</h2>
      
        <h2 id="常用的量化平台概述及如何选择"   >
          <a href="#常用的量化平台概述及如何选择" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用的量化平台概述及如何选择" class="headerlink" title="常用的量化平台概述及如何选择"></a>常用的量化平台概述及如何选择</h2>
      <ul>
<li>第三方量化平台分类和举例<ul>
<li>本地(图标/后台交易)<ul>
<li>金字塔、MC、TB、WH、TS、MT4</li>
</ul>
</li>
<li>云端(SaaS/券商定制)<ul>
<li>聚宽、优矿、米筐</li>
</ul>
</li>
<li>SDK/量化API(+终端/Web UI)<ul>
<li>万得、东财Choice、掘金量化</li>
</ul>
</li>
<li>开源框架(基于Python)<ul>
<li>PyCTP、VNPY、QuickLib、Zipline</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="如何把你的主观交易逻辑变成一个量化模型"   >
          <a href="#如何把你的主观交易逻辑变成一个量化模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#如何把你的主观交易逻辑变成一个量化模型" class="headerlink" title="如何把你的主观交易逻辑变成一个量化模型"></a>如何把你的主观交易逻辑变成一个量化模型</h2>
      
        <h1 id="第九课-以量化角度重新认识技术指标"   >
          <a href="#第九课-以量化角度重新认识技术指标" class="heading-link"><i class="fas fa-link"></i></a><a href="#第九课-以量化角度重新认识技术指标" class="headerlink" title="第九课 以量化角度重新认识技术指标"></a>第九课 以量化角度重新认识技术指标</h1>
      
        <h2 id="经典技术指标的基本原理及量化要点"   >
          <a href="#经典技术指标的基本原理及量化要点" class="heading-link"><i class="fas fa-link"></i></a><a href="#经典技术指标的基本原理及量化要点" class="headerlink" title="经典技术指标的基本原理及量化要点"></a>经典技术指标的基本原理及量化要点</h2>
      <ul>
<li>客观看待，理性应用<ul>
<li>扬长避短<ul>
<li>间接性、滞后性、钝化</li>
<li>连续背离现象</li>
<li>时间周期相关</li>
</ul>
</li>
<li>综合判断<ul>
<li>靠单一指标解决问题是不现实的</li>
<li>交叉验证，辅助决策</li>
</ul>
</li>
<li>概率思维<ul>
<li>行情多变，市场不可预测</li>
<li>量化即概率，大数定律</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="编写程序去量化一个趋势型技术指标"   >
          <a href="#编写程序去量化一个趋势型技术指标" class="heading-link"><i class="fas fa-link"></i></a><a href="#编写程序去量化一个趋势型技术指标" class="headerlink" title="编写程序去量化一个趋势型技术指标"></a>编写程序去量化一个趋势型技术指标</h2>
      <ul>
<li><p>指标之王MACD</p>
</li>
<li><p>环境准备</p>
<ul>
<li><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://ycjq.95358.com/" >一创聚宽</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>python2.7</li>
<li>pyecharts</li>
<li>pandas</li>
</ul>
</li>
<li><p>上传文件</p>
<ul>
<li><code>jukuan_db.py</code><ul>
<li>数据获取接口</li>
</ul>
</li>
<li><code>jukuan_macd_config.py</code><ul>
<li>macd信号检测配置文件</li>
</ul>
</li>
<li><code>jukuan_macd_signal.py</code><ul>
<li>历史数据缓存以及信号检测</li>
</ul>
</li>
<li><code>signal_statistics</code><ul>
<li>信号统计</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="编写趋势型技术指标的性能评价指标"   >
          <a href="#编写趋势型技术指标的性能评价指标" class="heading-link"><i class="fas fa-link"></i></a><a href="#编写趋势型技术指标的性能评价指标" class="headerlink" title="编写趋势型技术指标的性能评价指标"></a>编写趋势型技术指标的性能评价指标</h2>
      
        <h2 id="如何根据性能数据判断持仓周期"   >
          <a href="#如何根据性能数据判断持仓周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#如何根据性能数据判断持仓周期" class="headerlink" title="如何根据性能数据判断持仓周期"></a>如何根据性能数据判断持仓周期</h2>
      <ul>
<li>交易成本的影响</li>
<li>持仓周期、资金利用率与年化收益</li>
<li>交易机会的多少与交易频次</li>
<li>资金管理与风险控制</li>
</ul>

        <h1 id="第十课-基于多因子分析的股票"   >
          <a href="#第十课-基于多因子分析的股票" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十课-基于多因子分析的股票" class="headerlink" title="第十课 基于多因子分析的股票"></a>第十课 基于多因子分析的股票</h1>
      
        <h2 id="股票池选择策略的原因及基本框架"   >
          <a href="#股票池选择策略的原因及基本框架" class="heading-link"><i class="fas fa-link"></i></a><a href="#股票池选择策略的原因及基本框架" class="headerlink" title="股票池选择策略的原因及基本框架"></a>股票池选择策略的原因及基本框架</h2>
      <ul>
<li>一个交易系统的要素<ul>
<li>市场：买卖什么</li>
<li>头寸规模：要卖多少？</li>
<li>入市：什么时候买卖</li>
<li>止损：什么时候放弃一个亏损的头寸？</li>
<li>退出：什么时候退出一个盈利的头寸？</li>
<li>战术：怎么买卖？</li>
</ul>
</li>
</ul>

        <h2 id="基于多因子分析的股票池设计与实现"   >
          <a href="#基于多因子分析的股票池设计与实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于多因子分析的股票池设计与实现" class="headerlink" title="基于多因子分析的股票池设计与实现"></a>基于多因子分析的股票池设计与实现</h2>
      <ul>
<li><p>多因子模型的选股框架</p>
<ul>
<li>大类因子权重</li>
<li>最终权重</li>
</ul>
</li>
<li><p>对每只股票</p>
<ul>
<li>根据单因子分层进行打分</li>
<li>根据分层打分的因子权重进行股票得分的综合计算</li>
<li>根据综合打分进行排序，选取得分前10%股票进入股票池</li>
</ul>
</li>
<li><p>单因子检验-零投资组合检验</p>
</li>
<li><p>多因子模型的原则</p>
<ul>
<li>因子尽量少</li>
<li>因子间尽量独立</li>
<li>时间尽可能长</li>
</ul>
</li>
</ul>

        <h2 id="股票池的性能评估"   >
          <a href="#股票池的性能评估" class="heading-link"><i class="fas fa-link"></i></a><a href="#股票池的性能评估" class="headerlink" title="股票池的性能评估"></a>股票池的性能评估</h2>
      <ul>
<li><p>股票池设计</p>
<ul>
<li>基本面：排除劣质<ul>
<li>剔除总市值排名最小的10%的股票</li>
<li>剔除PE(TTM)小于0或大于100的股票</li>
<li>剔除ST股票</li>
</ul>
</li>
<li>技术面：超跌反弹<ul>
<li>取25日跌幅前10%的股票</li>
</ul>
</li>
</ul>
</li>
<li><p>单因子检验-市值</p>
</li>
<li><p>单因子检验-PE</p>
</li>
<li><p>股票池定义</p>
<ul>
<li>选股条件<ul>
<li>剔除总市值排名最小的10%的股票</li>
<li>剔除PE(TTM)小于0或大于100的股票</li>
<li>剔除ST股票</li>
<li>取25日跌幅前10%的股票</li>
</ul>
</li>
<li>再平衡周期<ul>
<li>25个交易日</li>
</ul>
</li>
<li>容量<ul>
<li>无限制</li>
</ul>
</li>
</ul>
</li>
<li><p>股票池检验</p>
<ul>
<li>股票池第一次构建<ul>
<li>买入股票池中所有的股票</li>
</ul>
</li>
<li>股票池每次再平衡<ul>
<li>卖出持仓股中已经不在股票池中的股票</li>
<li>买入股票池中新纳入的股票</li>
</ul>
</li>
<li>仓位<ul>
<li>平均分配可用资金</li>
</ul>
</li>
</ul>
</li>
<li><p>股票池优化探讨</p>
<ul>
<li>引入质量因子：ROE</li>
<li>引入资金面因子：连续N日主力资金净流入</li>
<li>引入综合财务指标：财务优秀</li>
</ul>
</li>
</ul>

        <h2 id="使用定制化财务因子构建股票池"   >
          <a href="#使用定制化财务因子构建股票池" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用定制化财务因子构建股票池" class="headerlink" title="使用定制化财务因子构建股票池"></a>使用定制化财务因子构建股票池</h2>
      <ul>
<li><p>风险</p>
<ul>
<li>资产负债率</li>
<li>净资产负债率</li>
<li>流动比率</li>
<li>速动比率</li>
</ul>
</li>
<li><p>运营效率</p>
<ul>
<li>总资产周转率</li>
<li>固定资产周转率</li>
<li>存货周转率</li>
<li>应收账款周转率</li>
</ul>
</li>
<li><p>盈利能力及质量</p>
<ul>
<li>营业收入增长率</li>
<li>净利润增长率</li>
<li>总资产增长率</li>
<li>净资产增长率</li>
</ul>
</li>
<li><p>前景与评估</p>
</li>
<li><p>盈利能力及质量评价因子</p>
<ul>
<li><code>因子评价=风险得分*0.1+运营效率得分*0.25+盈利能力及质量得分*0.4+前景与评估得分*0.25</code></li>
</ul>
</li>
<li><p>财务指标计算-资产负债率</p>
</li>
<li><p>财务指标计算-流动比率</p>
</li>
<li><p>财务指标计算-净资产收益率</p>
</li>
<li><p>财务指标计算-销售收现比率</p>
</li>
</ul>

        <h1 id="第十一课-趋势型策略的设计与实现"   >
          <a href="#第十一课-趋势型策略的设计与实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十一课-趋势型策略的设计与实现" class="headerlink" title="第十一课 趋势型策略的设计与实现"></a>第十一课 趋势型策略的设计与实现</h1>
      
        <h2 id="趋势型策略原理以及股票池机制的设计"   >
          <a href="#趋势型策略原理以及股票池机制的设计" class="heading-link"><i class="fas fa-link"></i></a><a href="#趋势型策略原理以及股票池机制的设计" class="headerlink" title="趋势型策略原理以及股票池机制的设计"></a>趋势型策略原理以及股票池机制的设计</h2>
      <ul>
<li>趋势与三个关系<ul>
<li>供需关系</li>
<li>因果关系</li>
<li>努力与结果</li>
</ul>
</li>
</ul>

        <h3 id="什么样的股票迎来趋势的概率高？"   >
          <a href="#什么样的股票迎来趋势的概率高？" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么样的股票迎来趋势的概率高？" class="headerlink" title="什么样的股票迎来趋势的概率高？"></a>什么样的股票迎来趋势的概率高？</h3>
      <ul>
<li>事件驱动<ul>
<li>高送转</li>
<li>重大资产重组</li>
<li>产业政策优惠</li>
</ul>
</li>
<li>技术分析<ul>
<li>上升通道</li>
<li>突破压力位</li>
</ul>
</li>
<li>过渡反应后的均值回复<ul>
<li>反转后的小海龟</li>
</ul>
</li>
</ul>

        <h2 id="趋势型择时信号的设计方法与编程实现"   >
          <a href="#趋势型择时信号的设计方法与编程实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#趋势型择时信号的设计方法与编程实现" class="headerlink" title="趋势型择时信号的设计方法与编程实现"></a>趋势型择时信号的设计方法与编程实现</h2>
      
        <h2 id="编写一个趋势策略并做回测与性能评估"   >
          <a href="#编写一个趋势策略并做回测与性能评估" class="heading-link"><i class="fas fa-link"></i></a><a href="#编写一个趋势策略并做回测与性能评估" class="headerlink" title="编写一个趋势策略并做回测与性能评估"></a>编写一个趋势策略并做回测与性能评估</h2>
      <ul>
<li><p>买入条件</p>
<ul>
<li>条件一：<ul>
<li>15分钟bar，MA5上穿MA30</li>
</ul>
</li>
<li>条件二：<ul>
<li>15分钟bar，MACD底背离(DIF vs Close)</li>
<li>5分钟bar，MACD连续底背离</li>
</ul>
</li>
</ul>
</li>
<li><p>头寸分配</p>
<ul>
<li>均仓</li>
<li>根据历史不完全统计，采用一个相对“不激进”的均仓方式</li>
</ul>
</li>
</ul>

        <h2 id="优化趋势型策略的思路及方法"   >
          <a href="#优化趋势型策略的思路及方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#优化趋势型策略的思路及方法" class="headerlink" title="优化趋势型策略的思路及方法"></a>优化趋势型策略的思路及方法</h2>
      
        <h1 id="第十二课-量化体系中的风险控制"   >
          <a href="#第十二课-量化体系中的风险控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十二课-量化体系中的风险控制" class="headerlink" title="第十二课 量化体系中的风险控制"></a>第十二课 量化体系中的风险控制</h1>
      
        <h2 id="风险的度量-波动率"   >
          <a href="#风险的度量-波动率" class="heading-link"><i class="fas fa-link"></i></a><a href="#风险的度量-波动率" class="headerlink" title="风险的度量-波动率"></a>风险的度量-波动率</h2>
      <ul>
<li>标准差</li>
<li>平均真实波幅ATR<ul>
<li>ATR：近N填真是波幅TR的算术平均值</li>
<li>TR：以下指标中的最大值<ul>
<li>今日最高价减去今日最低价</li>
<li>今日最高价减去昨日收盘价的绝对值</li>
<li>今日最低价减去昨日收盘价的绝对值</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="常用的风险控制方法"   >
          <a href="#常用的风险控制方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用的风险控制方法" class="headerlink" title="常用的风险控制方法"></a>常用的风险控制方法</h2>
      <ul>
<li><p>系统性风险</p>
<ul>
<li>政策面</li>
<li>资金面</li>
<li>国际环境</li>
<li>黑天鹅事件</li>
</ul>
</li>
<li><p>大盘调制指数</p>
<ul>
<li>指数均线</li>
<li>金叉/死叉</li>
<li>多头排列/空头排列</li>
<li>最大回撤倍数</li>
</ul>
</li>
<li><p>流动性限制</p>
<ul>
<li>持仓头寸不超过该股票流通市值的2%</li>
<li>日成交量不超过该股票成交量的10%</li>
</ul>
</li>
<li><p>期货的隔夜风险控制</p>
<ul>
<li>持仓不过节</li>
<li>隔夜操作需要控制仓位，降低第二天反向跳空爆仓的风险</li>
</ul>
</li>
</ul>

        <h2 id="策略性能的评估与优化"   >
          <a href="#策略性能的评估与优化" class="heading-link"><i class="fas fa-link"></i></a><a href="#策略性能的评估与优化" class="headerlink" title="策略性能的评估与优化"></a>策略性能的评估与优化</h2>
      <ul>
<li><p>止盈止损系统</p>
<ul>
<li>止盈<ul>
<li>最大盈利法</li>
<li>技术信号止盈</li>
</ul>
</li>
<li>止损<ul>
<li>最大亏损法</li>
<li>技术信号止损</li>
</ul>
</li>
<li>联合止盈止损<ul>
<li>跟踪止盈止损</li>
</ul>
</li>
</ul>
</li>
<li><p>跟踪止盈止损</p>
<ul>
<li>回撤N倍ATR止盈止损</li>
</ul>
</li>
</ul>

        <h2 id="实现止盈止损模块以提高策略性能"   >
          <a href="#实现止盈止损模块以提高策略性能" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现止盈止损模块以提高策略性能" class="headerlink" title="实现止盈止损模块以提高策略性能"></a>实现止盈止损模块以提高策略性能</h2>
      
        <h2 id="探讨波动率与风险的关系"   >
          <a href="#探讨波动率与风险的关系" class="heading-link"><i class="fas fa-link"></i></a><a href="#探讨波动率与风险的关系" class="headerlink" title="探讨波动率与风险的关系"></a>探讨波动率与风险的关系</h2>
      <ul>
<li><p>A股特质-缓涨急跌</p>
<ul>
<li>波动率与股市经常呈明显的负相关<ul>
<li>熊市阶段：波动率放大</li>
<li>牛市逐步上涨阶段：波动率稳定</li>
<li>牛市末期：波动率放大</li>
<li>震荡市：波动率缩小</li>
</ul>
</li>
</ul>
</li>
<li><p>绝对风险</p>
<ul>
<li>波动率大的交易标的风险大，需要更加严格控制其买入风险</li>
</ul>
</li>
<li><p>相对风险</p>
<ul>
<li>交易标的波动率随时间逐步放大，当超过一定阈值，需要更加严格控制其买入风险</li>
<li>波动率的圆形底形态</li>
</ul>
</li>
</ul>

        <h1 id="第十三课-量化体系中的资金管理"   >
          <a href="#第十三课-量化体系中的资金管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十三课-量化体系中的资金管理" class="headerlink" title="第十三课 量化体系中的资金管理"></a>第十三课 量化体系中的资金管理</h1>
      
        <h2 id="量化策略中的经典资金管理模型"   >
          <a href="#量化策略中的经典资金管理模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#量化策略中的经典资金管理模型" class="headerlink" title="量化策略中的经典资金管理模型"></a>量化策略中的经典资金管理模型</h2>
      <ul>
<li><p>确定头寸规模的四种模型</p>
<ul>
<li>每一固定金额交易一个单位</li>
<li>等价值交易单位</li>
<li>百分比风险模型</li>
<li>百分比波动幅度模型</li>
</ul>
</li>
<li><p>头寸管理模型的应用</p>
<ul>
<li>标的价格差别</li>
<li>风险偏好类型</li>
<li>总风险控制</li>
<li>标的波动差别</li>
</ul>
</li>
<li><p>波动率的衡量</p>
<ul>
<li>标准差</li>
<li>考虑前期时间窗口波动率的变化</li>
</ul>
</li>
</ul>

        <h2 id="用Python编程实现资金管理模块"   >
          <a href="#用Python编程实现资金管理模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#用Python编程实现资金管理模块" class="headerlink" title="用Python编程实现资金管理模块"></a>用Python编程实现资金管理模块</h2>
      
        <h2 id="构建一个完善的量化交易策略"   >
          <a href="#构建一个完善的量化交易策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#构建一个完善的量化交易策略" class="headerlink" title="构建一个完善的量化交易策略"></a>构建一个完善的量化交易策略</h2>
      <ul>
<li><p>股票池</p>
</li>
<li><p>细节考虑-流动性风险</p>
<ul>
<li>持仓头寸不超过该股票流通市值的2%</li>
<li>日成交量不超过该股票成交量的10%</li>
</ul>
</li>
<li><p>细节考虑-资金</p>
<ul>
<li>单日可用资金上限</li>
<li>单个交易标的资金上限</li>
<li>总可用资金上限</li>
</ul>
</li>
</ul>

        <h2 id="再讨论：策略的性能评估和优化"   >
          <a href="#再讨论：策略的性能评估和优化" class="heading-link"><i class="fas fa-link"></i></a><a href="#再讨论：策略的性能评估和优化" class="headerlink" title="再讨论：策略的性能评估和优化"></a>再讨论：策略的性能评估和优化</h2>
      <ul>
<li>平均分配风险<ul>
<li>预计建仓N个交易标的，按照风险平均分配原则，每个交易标的承担的风险为：总风险/N</li>
<li><code>头寸数量 = (总风险/N)/单个头寸风险</code></li>
</ul>
</li>
</ul>

        <h1 id="第十四课-期货趋势型策略开发"   >
          <a href="#第十四课-期货趋势型策略开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十四课-期货趋势型策略开发" class="headerlink" title="第十四课 期货趋势型策略开发"></a>第十四课 期货趋势型策略开发</h1>
      
        <h2 id="趋势型量化策略必备的期货知识"   >
          <a href="#趋势型量化策略必备的期货知识" class="heading-link"><i class="fas fa-link"></i></a><a href="#趋势型量化策略必备的期货知识" class="headerlink" title="趋势型量化策略必备的期货知识"></a>趋势型量化策略必备的期货知识</h2>
      <ul>
<li><p>典型的交易</p>
<ul>
<li>股票</li>
<li>期货</li>
<li>债券</li>
<li>外汇</li>
<li>期货</li>
<li>数字货币</li>
<li>……</li>
</ul>
</li>
<li><p>期货交易的基本特征</p>
<ul>
<li>合约标准化</li>
<li>交易集中化</li>
<li>双向交易和对冲机制</li>
<li>杠杆机制</li>
<li>每日无负债结算制度</li>
<li>T+0交易</li>
</ul>
</li>
<li><p>期货市场的构成</p>
<ul>
<li>套期保值者(企业)<ul>
<li>期现</li>
<li>基差</li>
</ul>
</li>
<li>投机者<ul>
<li>机构投资者<ul>
<li>期限</li>
<li>对冲</li>
<li>套利</li>
<li>单边</li>
</ul>
</li>
<li>个人散户投机者<ul>
<li>套利</li>
<li>单边</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>期货投资分析方法综述</p>
<ul>
<li>技术分析<ul>
<li>市场行为涵益一切信息</li>
<li>价格沿趋势移动</li>
<li>历史会重演</li>
</ul>
</li>
<li>基本分析<ul>
<li>因果关系明确，结论确定</li>
<li>完备的即时资料</li>
<li>极高的行业经验专业素质</li>
</ul>
</li>
<li>程序化交易<ul>
<li>技术分析程序化</li>
<li>数量统计分析、交易</li>
<li>高频交易</li>
</ul>
</li>
</ul>
</li>
<li><p>期货投资者的通病</p>
<ul>
<li>满仓操作</li>
<li>逆势开仓</li>
<li>持仓综合征</li>
<li>判顶断底</li>
<li>死不认输</li>
<li>逆势抢反弹</li>
<li>频繁全天候操作</li>
<li>把握不好进出场时机</li>
<li>盲目跟风</li>
<li>主力盯单心态</li>
</ul>
</li>
</ul>

        <h2 id="期货量化工具介绍"   >
          <a href="#期货量化工具介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#期货量化工具介绍" class="headerlink" title="期货量化工具介绍"></a>期货量化工具介绍</h2>
      <ul>
<li>期货量化平台选择<ul>
<li>TB（交易开拓者）</li>
<li>MC（Multicharts）</li>
<li>金字塔</li>
<li>WH8（文华赢智）</li>
<li>VN.PY（开源框架）</li>
<li>自行研发</li>
</ul>
</li>
</ul>

        <h2 id="趋势型策略原理"   >
          <a href="#趋势型策略原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#趋势型策略原理" class="headerlink" title="趋势型策略原理"></a>趋势型策略原理</h2>
      <ul>
<li><p>增仓动作（有持仓情况下）</p>
<ul>
<li>多头：相对于上次入场价格，每上涨N/2就新增一个单位的多头头寸，每根K线内可多次加仓</li>
<li>空头：相对于上次入场价格，每下跌N/2就新增一个单位的空头头寸，每根K先内可多次加仓</li>
</ul>
</li>
<li><p>退出（有持仓情况下）</p>
<ul>
<li>新增规则：相对于上次入场价格，如超过最大允许的损失幅度（2*N），则清仓。</li>
<li>加仓所在的那根K线内，不进行止损。</li>
</ul>
</li>
<li><p>其它细节</p>
<ul>
<li>长周期突破点保障信号<ul>
<li>入市过滤条件</li>
</ul>
</li>
<li>前次突破失败与否的判别<ul>
<li>盈利性退出</li>
<li>亏损性退出</li>
</ul>
</li>
</ul>
</li>
<li><p>期货交易策略的注意事项</p>
<ul>
<li>移仓换月（主力合约切换）</li>
<li>杠杆效应（保证金交易）</li>
<li>波动幅度（隔夜跳空风险）</li>
<li>套利机会（跨期、跨品种）</li>
</ul>
</li>
</ul>

        <h2 id="用TB开发商品期货趋势型策略"   >
          <a href="#用TB开发商品期货趋势型策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#用TB开发商品期货趋势型策略" class="headerlink" title="用TB开发商品期货趋势型策略"></a>用TB开发商品期货趋势型策略</h2>
      
        <h1 id="第十五课-均值回复型策略的设计与开发"   >
          <a href="#第十五课-均值回复型策略的设计与开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#第十五课-均值回复型策略的设计与开发" class="headerlink" title="第十五课 均值回复型策略的设计与开发"></a>第十五课 均值回复型策略的设计与开发</h1>
      
        <h2 id="均值回复型策略原理"   >
          <a href="#均值回复型策略原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#均值回复型策略原理" class="headerlink" title="均值回复型策略原理"></a>均值回复型策略原理</h2>
      <ul>
<li><p>理查德·塞勒的基金的理念</p>
</li>
<li><p>行为金融学指导下的交易策略</p>
</li>
<li><p>巴菲特的投资密码</p>
<ul>
<li>别人贪婪我恐惧，别人恐惧我贪婪</li>
<li>很平常的价钱买一家很棒的公司远远超过用很棒的价钱买一家平常的公司</li>
</ul>
</li>
<li><p>做趋势 VS. 做震荡</p>
<ul>
<li>大尺度：趋势+反转</li>
<li>中尺度：趋势跟随+均值回复</li>
<li>小尺度：均值回复</li>
<li>微小尺度：随机游走</li>
</ul>
</li>
<li><p>思考</p>
<ul>
<li>时段1和时段2间隔时间长度的影响<ul>
<li>对应：均值回复的尺度</li>
</ul>
</li>
<li>不同起始点的影响<ul>
<li>对应：在什么样的大趋势下有此特征</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="思路-短期市场反转"   >
          <a href="#思路-短期市场反转" class="heading-link"><i class="fas fa-link"></i></a><a href="#思路-短期市场反转" class="headerlink" title="思路-短期市场反转"></a>思路-短期市场反转</h2>
      <ol>
<li>建立一个股票池：过去3（或1）个月表现最差的N只股票构成的组合</li>
<li>再平衡周期：1个月</li>
<li>头寸管理：<ul>
<li>所有入选股票均仓</li>
<li>按照市值加权</li>
</ul>
</li>
<li>多空组合<ul>
<li>做多表现最差组合</li>
<li>做空表现最好组合</li>
</ul>
</li>
</ol>

        <h2 id="在聚宽上编写一个均值回复型股票量化策略"   >
          <a href="#在聚宽上编写一个均值回复型股票量化策略" class="heading-link"><i class="fas fa-link"></i></a><a href="#在聚宽上编写一个均值回复型股票量化策略" class="headerlink" title="在聚宽上编写一个均值回复型股票量化策略"></a>在聚宽上编写一个均值回复型股票量化策略</h2>
      <ul>
<li>策略编写的考虑<ul>
<li>投资标的选择<ul>
<li>投资组合的容量</li>
<li>期货VS.股票</li>
</ul>
</li>
<li>多空双向交易<ul>
<li>纯多头</li>
<li>做多/做空机制</li>
</ul>
</li>
</ul>
</li>
</ul>

        <h2 id="策略对交易成本的敏感范围检测"   >
          <a href="#策略对交易成本的敏感范围检测" class="heading-link"><i class="fas fa-link"></i></a><a href="#策略对交易成本的敏感范围检测" class="headerlink" title="策略对交易成本的敏感范围检测"></a>策略对交易成本的敏感范围检测</h2>
      
        <h3 id="压力测试-考虑各种成本"   >
          <a href="#压力测试-考虑各种成本" class="heading-link"><i class="fas fa-link"></i></a><a href="#压力测试-考虑各种成本" class="headerlink" title="压力测试-考虑各种成本"></a>压力测试-考虑各种成本</h3>
      <ul>
<li>各类交易费用<ul>
<li>交易所手续费</li>
<li>券商佣金</li>
</ul>
</li>
<li>保证金账户设置<ul>
<li>融资/融券利率</li>
<li>保证金比率</li>
</ul>
</li>
<li>滑点；冲击成本</li>
</ul>

        <h2 id="在策略中实现头寸管理进行策略优化"   >
          <a href="#在策略中实现头寸管理进行策略优化" class="heading-link"><i class="fas fa-link"></i></a><a href="#在策略中实现头寸管理进行策略优化" class="headerlink" title="在策略中实现头寸管理进行策略优化"></a>在策略中实现头寸管理进行策略优化</h2>
      
        <h3 id="头寸管理"   >
          <a href="#头寸管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#头寸管理" class="headerlink" title="头寸管理"></a>头寸管理</h3>
      <ul>
<li><p>分配资金方式：均仓(现有方式)VS.按波动率</p>
</li>
<li><p>波动率增大，意味着风险增加，分配的仓位就小，反之亦然</p>
</li>
<li><p>平均真实波幅ATR=MA(TR,N)</p>
<ul>
<li>TR = 当日的真实波动幅度 =Max(H-L,|H-PDC|,|PDC-L|)</li>
<li>其中：H=当日最高价，L=当日最低价，PDC=前一日收盘价</li>
</ul>
</li>
<li><p>头寸规模单位 = 账户的%风险/(ATR*每一最小交易单位)</p>
</li>
<li><p>更多优化方向</p>
<ul>
<li>调仓时，卖旧买新的逻辑如何更接近实战</li>
<li>大小周期，加择时，止盈止损</li>
<li>借鉴海龟交易法的动态头寸管理</li>
<li>行业板块占比均衡</li>
<li>成分股筛选和权重调整</li>
<li>参数优化（但要避免拟合）</li>
</ul>
</li>
</ul>

        <h2 id="总结-2"   >
          <a href="#总结-2" class="heading-link"><i class="fas fa-link"></i></a><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2>
      <ul>
<li>均值回复策略的原理，思路验证</li>
<li>纯多头和多空双向的实现和比较</li>
<li>评估交易成本的影响</li>
<li>通过头寸管理方法进行策略优化</li>
</ul>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="http://blog.gddfeng.com">gddFeng</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="http://blog.gddfeng.com/notebooks-Python%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AC%94%E8%AE%B0/">http://blog.gddfeng.com/notebooks-Python%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AC%94%E8%AE%B0/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://blog.gddfeng.com/tags/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/">课堂笔记</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://blog.gddfeng.com/tags/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/">量化交易</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://blog.gddfeng.com/tags/python/">Python</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/notebooks-Git/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Git使用笔记</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/notebooks-%E5%88%9B%E4%B8%9A%E8%80%85%E7%9A%84%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF%E7%AC%94%E8%AE%B0/"><span class="paginator-prev__text">创业者的成长之路笔记</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%AF%BE"><span class="toc-number">1.</span> <span class="toc-text">
          第一课</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%91%E8%9E%8D%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%9F%B9%E8%AE%AD"><span class="toc-number">1.1.</span> <span class="toc-text">
          金融基础知识培训</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%A7%E5%B8%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">
          货币基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E7%94%A8"><span class="toc-number">1.1.2.</span> <span class="toc-text">
          信用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%91%E8%9E%8D%E5%B8%82%E5%9C%BA"><span class="toc-number">1.1.3.</span> <span class="toc-text">
          金融市场</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%AF%BE-%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E7%9A%84%E5%8F%91%E5%B1%95%E5%92%8C%E7%90%86%E5%B7%A5%E7%94%9F%E8%B7%A8%E7%95%8C%E5%81%9A%E9%87%8F%E5%8C%96%E7%9A%84%E5%BC%80%E5%90%AF%E5%A7%BF%E5%8A%BF"><span class="toc-number">2.</span> <span class="toc-text">
          第二课 量化投资的发展和理工生跨界做量化的开启姿势</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">
          课程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%9C%B0%E5%81%9A%E9%87%8F%E5%8C%96%E4%BB%8E%E7%B3%BB%E7%BB%9F%E5%9C%B0%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%A7%8B"><span class="toc-number">2.1.1.</span> <span class="toc-text">
          系统地做量化从系统地学习开始</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A6%E4%BB%80%E4%B9%88%EF%BC%9F%E5%AD%A6%E4%BC%9A%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">2.1.2.</span> <span class="toc-text">
          学什么？学会什么？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">2.2.</span> <span class="toc-text">
          量化投资的发展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E8%A1%A8%E4%BA%BA%E7%89%A9"><span class="toc-number">2.2.1.</span> <span class="toc-text">
          代表人物</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E5%9C%A8%E4%B8%AD%E5%9B%BD%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">2.2.2.</span> <span class="toc-text">
          量化交易在中国的发展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%91%E8%9E%8D%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.3.</span> <span class="toc-text">
          金融工程模型分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#K%E7%BA%BF"><span class="toc-number">2.2.4.</span> <span class="toc-text">
          K线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E4%B8%8E%E4%B8%BB%E8%A7%82%E6%8A%95%E8%B5%84%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.3.</span> <span class="toc-text">
          量化投资与主观投资的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E8%A7%82%E7%82%B9"><span class="toc-number">2.3.1.</span> <span class="toc-text">
          交易观点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E5%A4%A7%E9%97%A8%E6%B4%BE"><span class="toc-number">2.3.2.</span> <span class="toc-text">
          五大门派</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EMH%E7%9A%84%E4%B8%89%E7%A7%8D%E5%BD%A2%E5%BC%8F"><span class="toc-number">2.3.3.</span> <span class="toc-text">
          EMH的三种形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E6%9F%A5%E5%BE%B7%C2%B7%E5%A1%9E%E5%8B%92%E7%9A%84%E7%90%86%E8%AE%BA"><span class="toc-number">2.3.4.</span> <span class="toc-text">
          理查德·塞勒的理论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%9A%E8%B0%81%E7%9A%84%E9%92%B1%EF%BC%9F%E8%B5%9A%E4%BB%80%E4%B9%88%E9%92%B1%EF%BC%9F"><span class="toc-number">2.3.5.</span> <span class="toc-text">
          赚谁的钱？赚什么钱？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E4%B8%80%E4%B8%AA%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5"><span class="toc-number">2.4.</span> <span class="toc-text">
          认识一个量化交易策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E5%9D%87%E7%BA%BF%E7%AD%96%E7%95%A5"><span class="toc-number">2.4.1.</span> <span class="toc-text">
          双均线策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%87%8F%E4%BA%91%E4%B8%8A%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.2.</span> <span class="toc-text">
          普量云上的模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%90%86%E5%B7%A5%E7%94%9F%E5%81%9A%E9%87%8F%E5%8C%96%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%BF"><span class="toc-number">2.5.</span> <span class="toc-text">
          理工生做量化有什么优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84"><span class="toc-number">2.6.</span> <span class="toc-text">
          量化交易系统的基本架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.6.1.</span> <span class="toc-text">
          一个完整的交易系统</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%85%E8%A6%81%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.7.</span> <span class="toc-text">
          必要的基础知识</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%AF%BE-%E4%B8%8A%E6%89%8B%E6%90%AD%E5%BB%BA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.</span> <span class="toc-text">
          第三课 上手搭建最简单的量化交易系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="toc-number">3.1.</span> <span class="toc-text">
          量化交易系统的处理流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8E%E4%BC%B0%E5%80%BC%E7%9A%84%E8%82%A1%E7%A5%A8%E6%B1%A0%E6%8B%A9%E6%97%B6%E7%AD%96%E7%95%A5"><span class="toc-number">3.1.1.</span> <span class="toc-text">
          低估值的股票池择时策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">3.2.</span> <span class="toc-text">
          开发环境准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%A1%8C%E6%83%85%E5%92%8C%E8%B4%A2%E6%8A%A5%E6%95%B0%E6%8D%AE%EF%BC%9AAPI%E5%92%8C%E7%88%AC%E8%99%AB"><span class="toc-number">3.3.</span> <span class="toc-text">
          获取行情和财报数据：API和爬虫</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E5%9F%BA%E6%9C%AC%E5%8A%9F"><span class="toc-number">3.3.1.</span> <span class="toc-text">
          量化基本功</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.3.2.</span> <span class="toc-text">
          任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E5%81%9C%E7%89%8C%E7%9A%84%E6%97%A5K%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.3.</span> <span class="toc-text">
          补充停牌的日K数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E6%97%B6%E5%A2%9E%E9%87%8F%E5%85%A5%E5%BA%93"><span class="toc-number">3.4.</span> <span class="toc-text">
          数据定时增量入库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E4%BD%8EPE%E7%9A%84%E8%82%A1%E7%A5%A8%E6%B1%A0"><span class="toc-number">3.5.</span> <span class="toc-text">
          实现一个低PE的股票池</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%B8%80%E7%BB%84%E4%BA%A4%E6%98%93%E4%BF%A1%E5%8F%B7"><span class="toc-number">3.6.</span> <span class="toc-text">
          开发一组交易信号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%AD%96%E7%95%A5%E5%9B%9E%E6%B5%8B"><span class="toc-number">3.7.</span> <span class="toc-text">
          实现策略回测</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E8%AF%BE-%E4%B8%B0%E5%AF%8C%E4%BD%A0%E7%9A%84%E4%BF%A1%E5%8F%B7%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.</span> <span class="toc-text">
          第四课 丰富你的信号系统</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E8%AF%BE-%E4%BB%93%E4%BD%8D%E7%AE%A1%E7%90%86%E5%92%8C%E9%A3%8E%E9%99%A9%E6%8E%A7%E5%88%B6%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">
          第五课 仓位管理和风险控制功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A2%E7%9B%88%E5%92%8C%E6%AD%A2%E6%8D%9F%E7%9A%84%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.1.</span> <span class="toc-text">
          止盈和止损的功能实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%93%E4%BD%8D%E7%AE%A1%E7%90%86%E5%B7%A5%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.2.</span> <span class="toc-text">
          仓位管理工程实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5"><span class="toc-number">5.3.</span> <span class="toc-text">
          编写一个完整的交易策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.4.</span> <span class="toc-text">
          总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E8%AF%BE-%E6%80%8E%E4%B9%88%E8%AF%84%E4%BB%B7%E5%92%8C%E8%AF%8A%E6%96%AD%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5"><span class="toc-number">6.</span> <span class="toc-text">
          第六课 怎么评价和诊断交易策略</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E7%A7%8D%E5%B8%B8%E7%94%A8%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.1.</span> <span class="toc-text">
          几种常用评价指标的工程实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E7%AD%96%E7%95%A5%E6%98%AF%E5%A5%BD%E7%AD%96%E7%95%A5"><span class="toc-number">6.2.</span> <span class="toc-text">
          什么样的策略是好策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E5%8E%BB%E6%94%B9%E8%BF%9B%E7%AD%96%E7%95%A5"><span class="toc-number">6.3.</span> <span class="toc-text">
          从哪些方面去改进策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">6.4.</span> <span class="toc-text">
          总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E8%AF%BE-%E8%BF%9B%E5%85%A5%E4%B8%93%E4%B8%9A%E9%87%8F%E5%8C%96%E8%B5%9B%E9%81%93%E7%9A%84%E5%BF%85%E4%BF%AE%E8%AF%BE"><span class="toc-number">7.</span> <span class="toc-text">
          第七课 进入专业量化赛道的必修课</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E6%A0%B9%E6%9C%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%EF%BC%9ALevel1-Ticks"><span class="toc-number">7.1.</span> <span class="toc-text">
          最根本的数据处理：Level1 Ticks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8%E4%B8%A4%E4%B8%AA%E5%AE%9E%E6%88%98%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">7.2.</span> <span class="toc-text">
          深入探讨两个实战量化策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Hans123"><span class="toc-number">7.2.1.</span> <span class="toc-text">
          Hans123</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5%E7%9A%84%E5%AE%8C%E6%95%B4%E7%A0%94%E5%8F%91%E5%92%8C%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA"><span class="toc-number">7.3.</span> <span class="toc-text">
          量化策略的完整研发和系统搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E4%BD%A0%E7%9A%84%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5%EF%BC%9A%E5%86%8D%E8%B0%88%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD"><span class="toc-number">7.4.</span> <span class="toc-text">
          如何优化你的量化策略：再谈人工智能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E5%91%8A%EF%BC%9A%E4%BD%A0%E6%9C%AA%E6%9D%A5%E5%BF%85%E8%B8%A9%E7%9A%84%E5%9D%91-%E6%80%8E%E4%B9%88%E4%B8%8A%E5%AE%9E%E7%9B%98%EF%BC%9F"><span class="toc-number">7.5.</span> <span class="toc-text">
          预告：你未来必踩的坑-怎么上实盘？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E8%AF%BE-%E5%AE%9E%E6%88%98%E5%9E%8B%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86"><span class="toc-number">8.</span> <span class="toc-text">
          第八课 实战型量化投资必备知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E7%AD%96%E7%95%A5%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%A8%A1%E5%9E%8B%E5%8E%9F%E7%90%86"><span class="toc-number">8.1.</span> <span class="toc-text">
          量化投资策略类型及模型原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%9E%8B%E5%8E%9F%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">
          趋势型策略模型原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E5%AF%B9%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5%E5%8E%9F%E7%90%86"><span class="toc-number">8.3.</span> <span class="toc-text">
          配对交易策略原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5%E7%A0%94%E5%8F%91%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD"><span class="toc-number">8.4.</span> <span class="toc-text">
          量化策略研发流程与基本技能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E9%87%8F%E5%8C%96%E5%B9%B3%E5%8F%B0%E6%A6%82%E8%BF%B0%E5%8F%8A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9"><span class="toc-number">8.5.</span> <span class="toc-text">
          常用的量化平台概述及如何选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%8A%8A%E4%BD%A0%E7%9A%84%E4%B8%BB%E8%A7%82%E4%BA%A4%E6%98%93%E9%80%BB%E8%BE%91%E5%8F%98%E6%88%90%E4%B8%80%E4%B8%AA%E9%87%8F%E5%8C%96%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.6.</span> <span class="toc-text">
          如何把你的主观交易逻辑变成一个量化模型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E8%AF%BE-%E4%BB%A5%E9%87%8F%E5%8C%96%E8%A7%92%E5%BA%A6%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87"><span class="toc-number">9.</span> <span class="toc-text">
          第九课 以量化角度重新认识技术指标</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%8F%8A%E9%87%8F%E5%8C%96%E8%A6%81%E7%82%B9"><span class="toc-number">9.1.</span> <span class="toc-text">
          经典技术指标的基本原理及量化要点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F%E5%8E%BB%E9%87%8F%E5%8C%96%E4%B8%80%E4%B8%AA%E8%B6%8B%E5%8A%BF%E5%9E%8B%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87"><span class="toc-number">9.2.</span> <span class="toc-text">
          编写程序去量化一个趋势型技术指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E8%B6%8B%E5%8A%BF%E5%9E%8B%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E7%9A%84%E6%80%A7%E8%83%BD%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87"><span class="toc-number">9.3.</span> <span class="toc-text">
          编写趋势型技术指标的性能评价指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%A0%B9%E6%8D%AE%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E5%88%A4%E6%96%AD%E6%8C%81%E4%BB%93%E5%91%A8%E6%9C%9F"><span class="toc-number">9.4.</span> <span class="toc-text">
          如何根据性能数据判断持仓周期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E8%AF%BE-%E5%9F%BA%E4%BA%8E%E5%A4%9A%E5%9B%A0%E5%AD%90%E5%88%86%E6%9E%90%E7%9A%84%E8%82%A1%E7%A5%A8"><span class="toc-number">10.</span> <span class="toc-text">
          第十课 基于多因子分析的股票</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%82%A1%E7%A5%A8%E6%B1%A0%E9%80%89%E6%8B%A9%E7%AD%96%E7%95%A5%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A1%86%E6%9E%B6"><span class="toc-number">10.1.</span> <span class="toc-text">
          股票池选择策略的原因及基本框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%A4%9A%E5%9B%A0%E5%AD%90%E5%88%86%E6%9E%90%E7%9A%84%E8%82%A1%E7%A5%A8%E6%B1%A0%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.2.</span> <span class="toc-text">
          基于多因子分析的股票池设计与实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%82%A1%E7%A5%A8%E6%B1%A0%E7%9A%84%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0"><span class="toc-number">10.3.</span> <span class="toc-text">
          股票池的性能评估</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%9A%E5%88%B6%E5%8C%96%E8%B4%A2%E5%8A%A1%E5%9B%A0%E5%AD%90%E6%9E%84%E5%BB%BA%E8%82%A1%E7%A5%A8%E6%B1%A0"><span class="toc-number">10.4.</span> <span class="toc-text">
          使用定制化财务因子构建股票池</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E8%AF%BE-%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">11.</span> <span class="toc-text">
          第十一课 趋势型策略的设计与实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8A%E8%82%A1%E7%A5%A8%E6%B1%A0%E6%9C%BA%E5%88%B6%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">11.1.</span> <span class="toc-text">
          趋势型策略原理以及股票池机制的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E8%82%A1%E7%A5%A8%E8%BF%8E%E6%9D%A5%E8%B6%8B%E5%8A%BF%E7%9A%84%E6%A6%82%E7%8E%87%E9%AB%98%EF%BC%9F"><span class="toc-number">11.1.1.</span> <span class="toc-text">
          什么样的股票迎来趋势的概率高？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B6%8B%E5%8A%BF%E5%9E%8B%E6%8B%A9%E6%97%B6%E4%BF%A1%E5%8F%B7%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%B3%95%E4%B8%8E%E7%BC%96%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-number">11.2.</span> <span class="toc-text">
          趋势型择时信号的设计方法与编程实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%B6%8B%E5%8A%BF%E7%AD%96%E7%95%A5%E5%B9%B6%E5%81%9A%E5%9B%9E%E6%B5%8B%E4%B8%8E%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0"><span class="toc-number">11.3.</span> <span class="toc-text">
          编写一个趋势策略并做回测与性能评估</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E7%9A%84%E6%80%9D%E8%B7%AF%E5%8F%8A%E6%96%B9%E6%B3%95"><span class="toc-number">11.4.</span> <span class="toc-text">
          优化趋势型策略的思路及方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E8%AF%BE-%E9%87%8F%E5%8C%96%E4%BD%93%E7%B3%BB%E4%B8%AD%E7%9A%84%E9%A3%8E%E9%99%A9%E6%8E%A7%E5%88%B6"><span class="toc-number">12.</span> <span class="toc-text">
          第十二课 量化体系中的风险控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A3%8E%E9%99%A9%E7%9A%84%E5%BA%A6%E9%87%8F-%E6%B3%A2%E5%8A%A8%E7%8E%87"><span class="toc-number">12.1.</span> <span class="toc-text">
          风险的度量-波动率</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E9%A3%8E%E9%99%A9%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">12.2.</span> <span class="toc-text">
          常用的风险控制方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%80%A7%E8%83%BD%E7%9A%84%E8%AF%84%E4%BC%B0%E4%B8%8E%E4%BC%98%E5%8C%96"><span class="toc-number">12.3.</span> <span class="toc-text">
          策略性能的评估与优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A2%E7%9B%88%E6%AD%A2%E6%8D%9F%E6%A8%A1%E5%9D%97%E4%BB%A5%E6%8F%90%E9%AB%98%E7%AD%96%E7%95%A5%E6%80%A7%E8%83%BD"><span class="toc-number">12.4.</span> <span class="toc-text">
          实现止盈止损模块以提高策略性能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A2%E8%AE%A8%E6%B3%A2%E5%8A%A8%E7%8E%87%E4%B8%8E%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">12.5.</span> <span class="toc-text">
          探讨波动率与风险的关系</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E8%AF%BE-%E9%87%8F%E5%8C%96%E4%BD%93%E7%B3%BB%E4%B8%AD%E7%9A%84%E8%B5%84%E9%87%91%E7%AE%A1%E7%90%86"><span class="toc-number">13.</span> <span class="toc-text">
          第十三课 量化体系中的资金管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5%E4%B8%AD%E7%9A%84%E7%BB%8F%E5%85%B8%E8%B5%84%E9%87%91%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9E%8B"><span class="toc-number">13.1.</span> <span class="toc-text">
          量化策略中的经典资金管理模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8Python%E7%BC%96%E7%A8%8B%E5%AE%9E%E7%8E%B0%E8%B5%84%E9%87%91%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">13.2.</span> <span class="toc-text">
          用Python编程实现资金管理模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5"><span class="toc-number">13.3.</span> <span class="toc-text">
          构建一个完善的量化交易策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%8D%E8%AE%A8%E8%AE%BA%EF%BC%9A%E7%AD%96%E7%95%A5%E7%9A%84%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0%E5%92%8C%E4%BC%98%E5%8C%96"><span class="toc-number">13.4.</span> <span class="toc-text">
          再讨论：策略的性能评估和优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E8%AF%BE-%E6%9C%9F%E8%B4%A7%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E5%BC%80%E5%8F%91"><span class="toc-number">14.</span> <span class="toc-text">
          第十四课 期货趋势型策略开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B6%8B%E5%8A%BF%E5%9E%8B%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5%E5%BF%85%E5%A4%87%E7%9A%84%E6%9C%9F%E8%B4%A7%E7%9F%A5%E8%AF%86"><span class="toc-number">14.1.</span> <span class="toc-text">
          趋势型量化策略必备的期货知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%9F%E8%B4%A7%E9%87%8F%E5%8C%96%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D"><span class="toc-number">14.2.</span> <span class="toc-text">
          期货量化工具介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5%E5%8E%9F%E7%90%86"><span class="toc-number">14.3.</span> <span class="toc-text">
          趋势型策略原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8TB%E5%BC%80%E5%8F%91%E5%95%86%E5%93%81%E6%9C%9F%E8%B4%A7%E8%B6%8B%E5%8A%BF%E5%9E%8B%E7%AD%96%E7%95%A5"><span class="toc-number">14.4.</span> <span class="toc-text">
          用TB开发商品期货趋势型策略</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E8%AF%BE-%E5%9D%87%E5%80%BC%E5%9B%9E%E5%A4%8D%E5%9E%8B%E7%AD%96%E7%95%A5%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91"><span class="toc-number">15.</span> <span class="toc-text">
          第十五课 均值回复型策略的设计与开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%87%E5%80%BC%E5%9B%9E%E5%A4%8D%E5%9E%8B%E7%AD%96%E7%95%A5%E5%8E%9F%E7%90%86"><span class="toc-number">15.1.</span> <span class="toc-text">
          均值回复型策略原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF-%E7%9F%AD%E6%9C%9F%E5%B8%82%E5%9C%BA%E5%8F%8D%E8%BD%AC"><span class="toc-number">15.2.</span> <span class="toc-text">
          思路-短期市场反转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E8%81%9A%E5%AE%BD%E4%B8%8A%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%9D%87%E5%80%BC%E5%9B%9E%E5%A4%8D%E5%9E%8B%E8%82%A1%E7%A5%A8%E9%87%8F%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">15.3.</span> <span class="toc-text">
          在聚宽上编写一个均值回复型股票量化策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E5%AF%B9%E4%BA%A4%E6%98%93%E6%88%90%E6%9C%AC%E7%9A%84%E6%95%8F%E6%84%9F%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">15.4.</span> <span class="toc-text">
          策略对交易成本的敏感范围检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95-%E8%80%83%E8%99%91%E5%90%84%E7%A7%8D%E6%88%90%E6%9C%AC"><span class="toc-number">15.4.1.</span> <span class="toc-text">
          压力测试-考虑各种成本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%AD%96%E7%95%A5%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%A4%B4%E5%AF%B8%E7%AE%A1%E7%90%86%E8%BF%9B%E8%A1%8C%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96"><span class="toc-number">15.5.</span> <span class="toc-text">
          在策略中实现头寸管理进行策略优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B4%E5%AF%B8%E7%AE%A1%E7%90%86"><span class="toc-number">15.5.1.</span> <span class="toc-text">
          头寸管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">15.6.</span> <span class="toc-text">
          总结</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">gddFeng</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2418180738&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener" data-popover="QQ" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">31</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">10</div><div class="sidebar-ov-state-item__name">分类</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021~2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>gddFeng All Rights Reserved</span><span class="footer__devider">|</span><span>冀2021001072号</span></div><div>有英勇也有温柔。</div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);

function safeOpenUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}

function extSearch(engine) {
  var engines = {
    google: 'https://www.google.com/search?q=',
    bing: 'https://cn.bing.com/search?q=',
    baidu: 'https://www.baidu.com/s?ie=UTF-8&wd=',
  };
  var host = window.location.host;
  var query = $('.search-input input').val().toLowerCase().trim();
  var uri = engines[engine] + query + ' site:' + host;

  if (query) {
    safeOpenUrl(uri);
  } else {
    Stun.utils.popAlert('warning', '请输入字符');
  }
}

var assistSearchList = window.CONFIG.assistSearch;

if (Array.isArray(assistSearchList)) {
  assistSearchList.forEach(function (name) {
    document.querySelector('.search-btns-item--' + name).addEventListener('click', function () {
      extSearch(name);
    }, false);
  });
}</script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script></body></html>